<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Vadym Antonyuk — deisign.me</title>
<link rel="canonical" href="https://deisign.me" />
<meta name="description" content="Portfolio of Vadym Antonyuk — series, linocuts, acrylic and digital works inspired by mid-century modern aesthetics.">
<meta property="og:title" content="Vadym Antonyuk — deisign.me">
<meta property="og:description" content="Imaginary modernist archives and visual series.">
<meta property="og:image" content="https://deisign.me/preview.jpg">
<meta property="og:url" content="https://deisign.me">
<meta name="twitter:card" content="summary_large_image">

<!-- Favicon (верни файлы в корень репо) -->
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="alternate icon" type="image/png" href="/favicon.png" sizes="32x32">

<style>
:root{
  --paper-bg:#f5f0e6;
  --paper-text:url('https://www.transparenttextures.com/patterns/paper-fibers.png');
  --frame:#111;
  --btn:#3A6EA5; --btn-hover:#F7B801;
  --c1:#3A6EA5;  --a1:#F7B801;
  --c2:#DB4F3D;  --a2:#F5F0E6;
  --c3:#597E52;  --a3:#F7B801;
  --c4:#E0A458;  --a4:#1D1D1D;
  --c5:#1C1C1C;  --a5:#DB4F3D;
  --c6:#2E4559;  --a6:#F7B801;
  --c7:#8E3A84;  --a7:#F7B801;
  --c8:#C4233C;  --a8:#F5F0E6;
  --c9:#008C6C;  --a9:#F7B801;
  --c10:#F7B801; --a10:#1C1C1C;
  --c11:#4E84C4; --a11:#FFD7A0;
  --c12:#FF7F00; --a12:#1D1D1D;
  --c13:#006AA7; --a13:#F7B801;
  --c14:#B71C1C; --a14:#FFE1C6;
  --c15:#355070; --a15:#E9C46A;
  --c16:#5A352A; --a16:#F1FAEE;
  --c17:#264653; --a17:#E76F51;
  --c18:#008491; --a18:#F9DC5C;
  --c19:#843B62; --a19:#FFBC42;
  --c20:#6A4C93; --a20:#F0F0F0;
  --c21:#0F6A6A;  --a21:#F6E7C1;
  --c22:#A65E2E;  --a22:#FFF1D6;
  --c23:#6B8A3F;  --a23:#F4E4A1;
  --c24:#3D405B;  --a24:#F2E9E4;
  --c25:#7A5C41;  --a25:#FBE7C6;
  --c26:#2B3A42;  --a26:#FFE8A3;
  --c27:#9A5A5A;  --a27:#FFF0E6;
  --c28:#586E75;  --a28:#FFE6A7;
  --c29:#8C6A2F;  --a29:#F8EDC2;
  --c30:#2E5E4E;  --a30:#F3E9D2;
  --c31:#3C6E71;  --a31:#F8F3E3;
  --c32:#B85C38;  --a32:#FFF0DA;
  --c33:#5F4B66;  --a33:#EAE4F2;
  --c34:#7D8F69;  --a34:#FFF1C1;
  --c35:#1D3A7D;  --a35:#F1E9FF;
  --c36:#556B2F;  --a36:#F1E8B8;
  --c37:#A68A64;  --a37:#1C1C1C;
  --c38:#3F5E5A;  --a38:#FFECD1;
  --c39:#924C2E;  --a39:#FFF2D5;
  --c40:#304C89;  --a40:#F7F4EA;
}

/* базовый стиль страницы */
body{
  margin:0; background:var(--paper-bg) var(--paper-text); color:#111;
  font:16px/1.5 system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
}
header{
  background:#DB4F3D; color:#fff; padding:20px 24px;
  font-size:22px; letter-spacing:.5px;
}
main{ max-width:1200px; margin:0 auto; padding:24px; }
.series{
  margin-bottom:60px;
  --bg:var(--c1); --fg:var(--a1);
  background:var(--bg);
  color:var(--fg);
  padding:16px 24px 32px;
  border-left:6px solid var(--fg);
  border-radius:8px;
}
.series h2{ margin:0 0 4px; font-size:26px; color:var(--fg); }
.series .meta{ font-size:15px; opacity:.8; }
.series .description{ margin:10px 0 20px; font-size:16px; max-width:640px; }
.series .works{ display:flex; flex-wrap:wrap; gap:14px; }
.series .work .thumb{ display:block; text-decoration:none; color:inherit; }
.series .work img{
  display:block; width:180px; height:auto; border:3px solid #fff4; border-radius:4px;
  box-shadow:0 1px 3px #0002; background:#eee;
}
.series .work p{
  margin:4px 0 0; font-size:13px; color:var(--fg);
}

/* Splash / заставка */
#splash {
  position: fixed; inset: 0;
  background: var(--paper-bg) var(--paper-text);
  display: grid; place-items: center;
  z-index: 9999;
  transition: opacity .35s ease;
}
#splash.hidden { opacity: 0; pointer-events: none; }

/* Скелетон + фиксированное соотношение сторон */
.skel { position: relative; overflow: hidden; background: #e8e4da; }
.skel::after {
  content:"";
  position:absolute; inset:0;
  background: linear-gradient(90deg, transparent, #ffffff55, transparent);
  transform: translateX(-100%); animation: shimmer 1.2s infinite;
}
@keyframes shimmer { to { transform: translateX(100%); } }
.ratio-4-5 { aspect-ratio: 4 / 5; }

/* ---- Lightbox ---- */
.lightbox{
  position: fixed; inset:0; z-index: 9999;
  background: rgba(0,0,0,.86);
  display:flex; align-items:center; justify-content:center;
  opacity:0; pointer-events:none; transition:.2s ease;
}
.lightbox.open{ opacity:1; pointer-events:auto; }
.lightbox .lb-img{ max-width: min(92vw, 1600px); max-height: 92vh; display:block; }
.lightbox .lb-close,.lightbox .lb-prev,.lightbox .lb-next{
  position:absolute; top:50%; transform:translateY(-50%);
  background: rgba(0,0,0,.5); border:1px solid #fff3; color:#fff;
  padding:10px 14px; border-radius:8px; cursor:pointer; user-select:none;
}
.lightbox .lb-close{ top:22px; right:22px; transform:none; }
.lightbox .lb-prev{ left:22px; }
.lightbox .lb-next{ right:22px; }
.lightbox .lb-caption{
  position:absolute; left:24px; right:24px; bottom:18px;
  color:#fff; text-align:center; font-size:14px; opacity:.9;
}
</style>
</head>

<body>
<!-- LIGHTBOX -->
<div id="lightbox" class="lightbox" aria-hidden="true" role="dialog" aria-label="Artwork viewer" style="display:none">
  <button class="lb-close" aria-label="Close (Esc)">✕</button>
  <button class="lb-prev" aria-label="Previous (←)">←</button>
  <img class="lb-img" alt="">
  <button class="lb-next" aria-label="Next (→)">→</button>
  <div class="lb-caption"></div>
</div>

<!-- Splash -->
<div id="splash">
  <div style="text-align:center">
    <div style="font-weight:700; letter-spacing:.04em">deisign.me</div>
    <div style="opacity:.7">loading the archive…</div>
  </div>
</div>

<header>Vadym Antonyuk — deisign.me</header>
<main id="gallery"></main>

<script>
async function loadWorks(){
  const res = await fetch('works.json');
  const data = await res.json();
  const container = document.getElementById('gallery');

  const priorityImages = []; // первые превью для снятия splash

  data.forEach(series=>{
    container.appendChild(renderSeries(series, priorityImages));
  });

  initLazyLoad();
  hideSplashWhenReady(priorityImages);
  initLightbox();
}

function applyPalette(el, idx){
  const n = Math.min(Math.max(Number(idx)||1, 1), 40);
  el.style.setProperty('--bg', `var(--c${n})`);
  el.style.setProperty('--fg', `var(--a${n})`);
}

function renderSeries(item, priorityImages){
  const section = document.createElement('section');
  section.className = 'series';
  applyPalette(section, item.color);
  const works = (item.images||[]).map((img, i) => {
    const full  = img.full || img.url;   // полноразмер
    const thumb = img.thumb || img.url;  // превью
    const prior = i < 2 ? 'data-priority="1"' : '';
    const title = img.title || '';
    const year  = img.year ? ` (${img.year})` : '';

    return `
      <div class="work">
        <a href="${full}" class="thumb"
           data-full="${full}"
           data-title="${title.replace(/"/g,'&quot;')}"
           data-year="${img.year || ''}"
           data-series="${(item.title||'').replace(/"/g,'&quot;')}">
          <div class="skel ratio-4-5">
            <img data-src="${thumb}" alt="${title}" ${prior}>
          </div>
        </a>
        <p>${title}${year}</p>
      </div>`;
  }).join('');

  section.innerHTML = `
    <h2>${item.title}</h2>
    <p class="meta">${item.year} / ${item.media}</p>
    <p class="description">${item.description||''}</p>
    <div class="works">${works}</div>
  `;

  section.querySelectorAll('img[data-priority]').forEach(img => priorityImages.push(img));
  return section;
}

/* ===== Lazy load через IntersectionObserver ===== */
function initLazyLoad(){
  const imgs = document.querySelectorAll('img[data-src]');
  if (!('IntersectionObserver' in window)) {
    imgs.forEach(loadImgNow);
    return;
  }
  const io = new IntersectionObserver((entries, obs)=>{
    for (const e of entries){
      if (e.isIntersecting){
        loadImgNow(e.target);
        obs.unobserve(e.target);
      }
    }
  }, { rootMargin: '250px 0px' });
  imgs.forEach(img => io.observe(img));
}

function loadImgNow(img){
  const src = img.getAttribute('data-src');
  if (!src) return;
  const onDone = ()=>{
    const wrap = img.closest('.skel');
    if (wrap) { wrap.classList.remove('skel'); wrap.style.background='none'; }
    img.removeAttribute('data-src');
  };
  img.addEventListener('load', onDone, { once:true });
  img.addEventListener('error', onDone, { once:true });
  img.src = src;
}

/* ===== Splash: скрыть, когда первые изображения готовы или по таймауту ===== */
function hideSplashWhenReady(priorityImgs){
  const splash = document.getElementById('splash');
  if (!splash) return;

  const MIN_SHOW_MS = 350;
  const TIMEOUT_MS = 4000;
  const start = performance.now();

  if (!priorityImgs.length){
    return setTimeout(()=> splash.classList.add('hidden'), 600);
  }

  let ready = 0;
  const check = ()=>{
    if (++ready >= priorityImgs.length){
      const delay = Math.max(0, MIN_SHOW_MS - (performance.now() - start));
      setTimeout(()=> splash.classList.add('hidden'), delay);
    }
  };

  priorityImgs.forEach(img=>{
    if (img.complete) { check(); return; }
    img.addEventListener('load', check, { once:true });
    img.addEventListener('error', check, { once:true });
    if (img.dataset.src && !img.src) loadImgNow(img);
  });

  setTimeout(()=> splash.classList.add('hidden'), TIMEOUT_MS);
}

/* ===== Лайтбокс ===== */
let LB = { root:null, img:null, cap:null, btnPrev:null, btnNext:null, btnClose:null, list:[], idx:-1 };

function initLightbox(){
  LB.root = document.getElementById('lightbox');
  LB.img  = LB.root.querySelector('.lb-img');
  LB.cap  = LB.root.querySelector('.lb-caption');
  LB.btnPrev = LB.root.querySelector('.lb-prev');
  LB.btnNext = LB.root.querySelector('.lb-next');
  LB.btnClose= LB.root.querySelector('.lb-close');

  document.addEventListener('click', (e)=>{
    const a = e.target.closest('a.thumb');
    if (!a) return;
    e.preventDefault();
    const series = a.getAttribute('data-series') || '';
    LB.list = [...document.querySelectorAll(`a.thumb[data-series="${CSS.escape(series)}"]`)];
    LB.idx  = LB.list.indexOf(a);
    if (LB.idx < 0) LB.idx = 0;
    openLightboxByIndex(LB.idx);
  });

  LB.btnClose.addEventListener('click', closeLightbox);
  LB.btnNext .addEventListener('click', nextLightbox);
  LB.btnPrev .addEventListener('click', prevLightbox);
  LB.root.addEventListener('click', (e)=>{ if (e.target === LB.root) closeLightbox(); });

  window.addEventListener('keydown', (e)=>{
    if (!LB.root.classList.contains('open')) return;
    if (e.key === 'Escape') closeLightbox();
    if (e.key === 'ArrowRight') nextLightbox();
    if (e.key === 'ArrowLeft')  prevLightbox();
  });
}

function openLightboxByIndex(i){
  LB.idx = (i + LB.list.length) % LB.list.length;
  const a = LB.list[LB.idx];
  if (!a) return;

  const full = a.getAttribute('data-full');
  const title= a.getAttribute('data-title') || '';
  const year = a.getAttribute('data-year');
  const caption = title + (year ? ` (${year})` : '');

  LB.img.src = '';
  LB.img.alt = title;
  LB.cap.textContent = caption;

  const pic = new Image();
  pic.onload = ()=>{ LB.img.src = pic.src; };
  pic.onerror = ()=>{ LB.img.src = full; };
  pic.src = full;

  LB.root.style.display = 'flex';
  requestAnimationFrame(()=> LB.root.classList.add('open'));
  document.documentElement.style.overflow = 'hidden';

  preloadNeighbor(+1);
  preloadNeighbor(-1);
}

function closeLightbox(){
  LB.root.classList.remove('open');
  setTimeout(()=> { LB.root.style.display='none'; }, 180);
  document.documentElement.style.overflow = '';
}

function nextLightbox(){ openLightboxByIndex(LB.idx+1); }
function prevLightbox(){ openLightboxByIndex(LB.idx-1); }

function preloadNeighbor(step){
  const j = (LB.idx + step + LB.list.length) % LB.list.length;
  const a = LB.list[j];
  if (!a) return;
  const src = a.getAttribute('data-full');
  const im = new Image(); im.src = src;
}

/* старт */
loadWorks();
</script>
</body>
</html>
